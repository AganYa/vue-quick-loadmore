{"version":3,"sources":["src/VueQuickLoadmore.vue","index.js"],"names":["install","Vue","component","VueQuickLoadmore"],"mappings":"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","file":"index.map","sourceRoot":"..","sourcesContent":["<!--  -->\n<template>\n  <div class=\"vsim-load\" @scroll.passive=\"handleScroll\" :style=\"{overflow:bottomOverflow}\">\n    <div class=\"vsim-load-content\" ref=\"content\">\n      <slot name=\"top\">\n        <div class=\"vsim-load-header\">\n          <div>{{topText}}</div>\n        </div>\n      </slot>\n      <slot></slot>\n      <slot name=\"bottom\">\n        <div class=\"vsim-load-footer\">\n          <div>{{bottomText}}</div>\n        </div>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\nconst TOPSTATUS = {\n  wait: \"wait\",\n  pulling: \"pulling\",\n  limit: \"limit\",\n  loading: \"loading\"\n};\nconst BOTTOMSTATUS = {\n  wait: \"wait\",\n  loading: \"loading\",\n  nodata: \"nodata\"\n};\nexport default {\n  props: {\n    // 禁止上拉刷新\n    disableTop: {\n      type: Boolean,\n      default: false\n    },\n    // 上拉移动比例\n    distanceIndex: {\n      type: Number,\n      default: 2\n    },\n    // loading时与顶端距离\n    topLoadingDistance: {\n      type: Number,\n      default: 50\n    },\n    // 上拉距离触发值\n    topDistance: {\n      type: Number,\n      default: 100\n    },\n    // 上拉触发方法\n    topMethod: {\n      type: Function,\n      default() {\n        return function() {\n          console.log(\"topmethod\");\n        };\n      }\n    },\n    // 上拉刷新状态改变\n    topStatusChange: {\n      type: Function,\n      default() {\n        return function() {\n          console.log(\"topStatusChange\");\n        };\n      }\n    },\n\n    // 禁止下拉加载\n    disableBottom: {\n      type: Boolean,\n      default: false\n    },\n    // 触发下拉加载距离\n    bottomDistance: {\n      type: Number,\n      default: 10\n    },\n    // 下拉加载方法\n    bottomMethod: {\n      type: Function,\n      default() {\n        return function() {};\n      }\n    },\n    // 下拉刷新状态改变\n    bottomStatusChange: {\n      type: Function,\n      default() {\n        return function() {\n          console.log(\"topStatusChange\");\n        };\n      }\n    }\n  },\n  data() {\n    return {\n      startPositionTop: null,\n      startScreenY: 0,\n      endScreenY: 0,\n      topStatus: TOPSTATUS.wait, // 'wait'等待 , 'pulling'下拉,'limit'超过topDistance触发,'loading'正在loading\n      bottomOverflow: \"auto\",\n      bottomStatus: BOTTOMSTATUS.wait\n    };\n  },\n\n  components: {},\n\n  computed: {\n    topText() {\n      switch (this.topStatus) {\n        case TOPSTATUS.pulling:\n          return \"下拉刷新\";\n          break;\n        case TOPSTATUS.limit:\n          return \"释放刷新\";\n          break;\n        case TOPSTATUS.loading:\n          return \"正在刷新...\";\n          break;\n        default:\n          return \"\";\n      }\n    },\n    bottomText() {\n      switch (this.bottomStatus) {\n        case BOTTOMSTATUS.loading:\n          return \"正在加载更多...\";\n          break;\n        case BOTTOMSTATUS.nodata:\n          return \"暂无更多数据\";\n          break;\n        default:\n          return \"\";\n      }\n    }\n  },\n  watch: {\n    topStatus(next) {\n      this.topStatusChange(next);\n    },\n    bottomStatus(next) {\n      this.bottomStatusChange(next);\n    }\n  },\n  mounted() {\n    this.init();\n  },\n\n  methods: {\n    handleScroll() {\n      if (this.disableBottom) {\n        return;\n      }\n      if (this.bottomStatus !== BOTTOMSTATUS.wait) {\n        return;\n      }\n\n      let bDistance =\n        this.$el.scrollHeight - this.$el.scrollTop - this.$el.clientHeight;\n      if (bDistance <= this.bottomDistance) {\n        this.bottomStatus = BOTTOMSTATUS.loading;\n        this.$nextTick(() => {\n          this.$el.scrollTo(0, this.$el.scrollHeight);\n          // this.$el.scrollTop = this.$el.scrollHeight\n        });\n        this.bottomMethod();\n      }\n    },\n    // 获得滚动距离\n    getScrollTop() {\n      return this.$el.scrollTop;\n    },\n    // 设置滚动距离\n    setScrollTop(y) {\n      this.$nextTick(() => {\n        this.$el.scrollTop = parseFloat(y);\n      });\n    },\n    init() {\n      this.startPositionTop = this.$refs.content.getBoundingClientRect().top;\n      if (!this.disableTop) {\n        this.bindTouchEvents();\n      }\n    },\n    bindTouchEvents() {\n      this.$refs.content.addEventListener(\"touchstart\", this.handleTouchStart);\n      this.$refs.content.addEventListener(\"touchmove\", this.handleTouchMove);\n      this.$refs.content.addEventListener(\"touchend\", this.handleTouchEnd);\n    },\n    handleTouchStart(e) {\n      // 只有没滚动时才触发事件\n      if (\n        this.$refs.content.getBoundingClientRect().top < this.startPositionTop\n      ) {\n        return;\n      }\n      if (this.topStatus === TOPSTATUS.loading) {\n        return;\n      }\n\n      let screenY = e.touches[0].screenY;\n      this.startScreenY = screenY;\n    },\n    handleTouchMove(e) {\n      // 只有没滚动时才触发事件\n      if (\n        this.$refs.content.getBoundingClientRect().top < this.startPositionTop\n      ) {\n        return;\n      }\n      if (this.topStatus === \"loading\") {\n        return;\n      }\n\n      let screenY = e.touches[0].screenY;\n      this.endScreenY = screenY;\n      let moveDistance = (screenY - this.startScreenY) / this.distanceIndex;\n      if (\n        this.$refs.content.getBoundingClientRect().top > this.startPositionTop\n      ) {\n        this.topStatus = TOPSTATUS.pulling;\n      }\n\n      if (moveDistance >= this.topDistance) {\n        this.topStatus = TOPSTATUS.limit;\n      }\n      if (moveDistance > 0) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.transformStyle(this.$refs.content, moveDistance);\n      }\n    },\n    handleTouchEnd(e) {\n      // 只有没滚动时才触发事件\n      if (\n        this.$refs.content.getBoundingClientRect().top < this.startPositionTop\n      ) {\n        return;\n      }\n      if (\n        this.topStatus === TOPSTATUS.pulling ||\n        this.topStatus === TOPSTATUS.limit\n      ) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      if (this.topStatus === \"loading\") {\n        return;\n      }\n\n      if (\n        (this.endScreenY - this.startScreenY) / this.distanceIndex >=\n        this.topDistance\n      ) {\n        this.transformStyle(this.$refs.content, this.topLoadingDistance, true);\n        this.topStatus = TOPSTATUS.loading;\n        this.topMethod();\n        if (!this.disableBottom) {\n          this.bottomStatus = BOTTOMSTATUS.wait;\n        }\n      } else {\n        this.topStatus = TOPSTATUS.wait;\n        this.transformStyle(this.$refs.content, 0);\n        this.startScreenY = 0;\n        this.endScreenY = 0;\n      }\n    },\n    // 上拉数据加载完\n    onTopLoaded() {\n      this.transformStyle(this.$refs.content, 0, true);\n      this.topStatus = TOPSTATUS.wait;\n      this.startScreenY = 0;\n      this.endScreenY = 0;\n    },\n    // 下拉数据加载完\n    onBottomLoaded(flag = true) {\n      if (flag) {\n        this.bottomStatus = BOTTOMSTATUS.wait;\n      } else {\n        this.bottomStatus = BOTTOMSTATUS.nodata;\n      }\n    },\n    // 动画\n    transformStyle(target, moveDistance, transition, timer = 200) {\n      target.style[\"-webkit-transform\"] =\n        \"translate3d(0,\" + moveDistance + \"px,0)\";\n      target.style[\"transform\"] = \"translate3d(0,\" + moveDistance + \"px,0)\";\n      target.style.transitionDuration = \"0ms\";\n      if (transition) {\n        target.style.transitionDuration = timer + \"ms\";\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.vsim-load {\n  height: 100%;\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.vsim-load-header {\n  margin-top: -50px;\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  font-size: 14px;\n  color: #666666;\n  letter-spacing: -0.31px;\n}\n\n.vsim-load-footer {\n  height: 50px;\n  line-height: 50px;\n  text-align: center;\n  font-size: 13px;\n  color: #666666;\n  letter-spacing: -0.31px;\n}\n</style>","\nimport VueQuickLoadmore from './src/VueQuickLoadmore.vue';\n\nexport default {\n    install(Vue){\n        Vue.component('quick-loadmore', VueQuickLoadmore)\n    }\n}"]}